(function(){"use strict";var e={4890:function(e,t,s){var r=s(5130),o=s(6768);const a={class:"min-h-screen bg-gray-100"};function n(e,t,s,r,n,i){const c=(0,o.g2)("LessonList");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(c)])}var i=s(4232);const c={class:"container mx-auto px-4 py-8"},l={class:"flex justify-between items-center mb-8"},u=["disabled"],d={class:"font-medium"},h={key:1},m={key:0,class:"flex justify-center items-center py-8"},p={key:1,class:"bg-red-50 text-red-600 p-4 rounded-lg mb-6"},f={key:2},g={class:"flex flex-wrap gap-4 mb-6 items-center bg-white p-4 rounded-lg shadow"},b={class:"flex items-center"},k={key:0,class:"text-center py-8 text-gray-500"};function y(e,t,s,a,n,y){const v=(0,o.g2)("SearchBar"),x=(0,o.g2)("ShoppingCart"),L=(0,o.g2)("SortIndicator"),w=(0,o.g2)("LessonCard"),C=(0,o.g2)("ToastNotification");return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",l,[t[5]||(t[5]=(0,o.Lk)("h1",{class:"text-3xl font-bold text-gray-800"},"Available Lessons",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showCart=!n.showCart),disabled:0===n.cartItems.length,class:(0,i.C4)(["flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",[n.cartItems.length>0?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-500 cursor-not-allowed"]])},[t[4]||(t[4]=(0,o.Lk)("i",{class:"fas fa-shopping-cart text-xl mr-2"},null,-1)),(0,o.Lk)("span",d,"Cart Items: "+(0,i.v_)(n.cartItems.length),1)],10,u)]),(0,o.bF)(v,{"initial-count":y.sortedLessons.length,onSearch:y.handleSearch,class:"mb-6"},null,8,["initial-count","onSearch"]),(0,o.bF)(r.eB,{name:"fade",mode:"out-in"},{default:(0,o.k6)((()=>[n.showCart?((0,o.uX)(),(0,o.Wv)(x,{key:0,cartItems:n.cartItems,onToggleCart:t[1]||(t[1]=e=>n.showCart=!1),onRemoveFromCart:y.removeFromCart,onCheckoutComplete:y.handleCheckoutComplete},null,8,["cartItems","onRemoveFromCart","onCheckoutComplete"])):((0,o.uX)(),(0,o.CE)("div",h,[n.loading?((0,o.uX)(),(0,o.CE)("div",m,t[6]||(t[6]=[(0,o.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):n.error?((0,o.uX)(),(0,o.CE)("div",p,(0,i.v_)(n.error),1)):((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",g,[(0,o.Lk)("div",b,[t[8]||(t[8]=(0,o.Lk)("label",{for:"sortBy",class:"mr-2 text-gray-700"},"Sort by:",-1)),(0,o.bo)((0,o.Lk)("select",{id:"sortBy","onUpdate:modelValue":t[2]||(t[2]=e=>n.sortBy=e),class:"border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},t[7]||(t[7]=[(0,o.Lk)("option",{value:"subject"},"Subject",-1),(0,o.Lk)("option",{value:"location"},"Location",-1),(0,o.Lk)("option",{value:"price"},"Price",-1),(0,o.Lk)("option",{value:"spaces"},"Spaces",-1)]),512),[[r.u1,n.sortBy]])]),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>y.toggleSortOrder&&y.toggleSortOrder(...e)),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},[(0,o.Lk)("i",{class:(0,i.C4)(["fas",y.sortOrderIcon])},null,2),(0,o.eW)(" "+(0,i.v_)(y.sortOrderText),1)])]),(0,o.bF)(L,{attribute:n.sortBy,ascending:n.ascending,class:"mb-6"},null,8,["attribute","ascending"]),0===y.sortedLessons.length?((0,o.uX)(),(0,o.CE)("div",k," No lessons found matching your search. ")):((0,o.uX)(),(0,o.CE)("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",key:n.sortBy+n.ascending},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(y.sortedLessons,(e=>((0,o.uX)(),(0,o.Wv)(w,{key:e.id,lesson:e,onAddToCart:y.addToCart},null,8,["lesson","onAddToCart"])))),128))]))]))]))])),_:1}),(0,o.bF)(C,{show:n.showToast,message:n.toastMessage,multiplier:n.toastMultiplier},null,8,["show","message","multiplier"])])}s(4114);const v={class:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow"},x={class:"flex items-center mb-4"},L={class:"text-xl font-semibold text-gray-800"},w={class:"space-y-2"},C={class:"text-gray-600"},E={class:"text-gray-600"},S={class:"text-gray-600"},X=["disabled"];function F(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",x,[(0,o.Lk)("i",{class:(0,i.C4)(["fas",s.lesson.icon,"text-3xl text-blue-600 mr-4"])},null,2),(0,o.Lk)("h2",L,(0,i.v_)(s.lesson.subject),1)]),(0,o.Lk)("div",w,[(0,o.Lk)("p",C,[t[1]||(t[1]=(0,o.Lk)("i",{class:"fas fa-location-dot mr-2"},null,-1)),(0,o.eW)(" "+(0,i.v_)(s.lesson.location),1)]),(0,o.Lk)("p",E,[t[2]||(t[2]=(0,o.Lk)("i",{class:"fas fa-pound-sign mr-2"},null,-1)),(0,o.eW)(" "+(0,i.v_)(s.lesson.price),1)]),(0,o.Lk)("p",S,[t[3]||(t[3]=(0,o.Lk)("i",{class:"fas fa-user-group mr-2"},null,-1)),(0,o.eW)(" Spaces: "+(0,i.v_)(s.lesson.spaces),1)]),(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("add-to-cart",s.lesson)),disabled:0===s.lesson.spaces,class:(0,i.C4)(["w-full mt-4 px-4 py-2 rounded-md text-white font-medium transition-colors",[s.lesson.spaces>0?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"]])},[t[4]||(t[4]=(0,o.Lk)("i",{class:"fas fa-cart-plus mr-2"},null,-1)),(0,o.eW)(" "+(0,i.v_)(s.lesson.spaces>0?"Add to Cart":"No Spaces Left"),1)],10,X)])])}var T={name:"LessonCard",props:{lesson:{type:Object,required:!0}}},j=s(1241);const I=(0,j.A)(T,[["render",F]]);var _=I;const A={class:"flex items-center text-sm text-gray-600 mt-2"};function O(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",A,[t[3]||(t[3]=(0,o.Lk)("i",{class:"fas fa-info-circle mr-2"},null,-1)),(0,o.Lk)("span",null,[t[0]||(t[0]=(0,o.eW)(" Sorted by: ")),(0,o.Lk)("strong",null,(0,i.v_)(n.formatAttribute(s.attribute)),1),t[1]||(t[1]=(0,o.eW)(" in ")),(0,o.Lk)("strong",null,(0,i.v_)(s.ascending?"ascending":"descending"),1),t[2]||(t[2]=(0,o.eW)(" order ")),(0,o.Lk)("i",{class:(0,i.C4)(["fas ml-2",s.ascending?"fa-arrow-up-a-z":"fa-arrow-down-z-a"])},null,2)])])}var B={name:"SortIndicator",props:{attribute:{type:String,required:!0,validator:e=>["subject","location","price","spaces"].includes(e)},ascending:{type:Boolean,required:!0}},methods:{formatAttribute(e){const t={subject:"Subject",location:"Location",price:"Price",spaces:"Available Spaces"};return t[e]||e.charAt(0).toUpperCase()+e.slice(1)}}};const P=(0,j.A)(B,[["render",O]]);var N=P;const $={key:0,class:"fixed bottom-4 right-4 max-w-md w-full mx-4 bg-white rounded-lg shadow-lg overflow-hidden"},M={class:"p-4 flex items-center space-x-4"},W={class:"flex-1"},z={class:"text-gray-800 font-medium flex items-center gap-2"},J={key:0,class:"inline-flex items-center justify-center bg-blue-500 text-white text-sm px-2 py-1 rounded-full animate-bounce"},U={class:"text-gray-600"};function q(e,t,s,a,n,c){return(0,o.uX)(),(0,o.Wv)(r.eB,{name:"toast"},{default:(0,o.k6)((()=>[s.show?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("div",M,[t[1]||(t[1]=(0,o.Lk)("div",{class:"flex-shrink-0 bg-green-100 rounded-full p-2"},[(0,o.Lk)("i",{class:"fas fa-check-circle text-green-500 text-xl"})],-1)),(0,o.Lk)("div",W,[(0,o.Lk)("h4",z,[t[0]||(t[0]=(0,o.eW)(" Added to Cart! ")),s.multiplier>1?((0,o.uX)(),(0,o.CE)("span",J," x"+(0,i.v_)(s.multiplier),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("p",U,(0,i.v_)(s.message),1)]),t[2]||(t[2]=(0,o.Lk)("div",{class:"cart-animation"},[(0,o.Lk)("i",{class:"fas fa-shopping-cart text-blue-500 text-xl"})],-1))]),t[3]||(t[3]=(0,o.Lk)("div",{class:"h-1 bg-gray-200"},[(0,o.Lk)("div",{class:"h-full bg-green-500 progress-bar",style:{animation:"progress 3s linear forwards"}})],-1))])):(0,o.Q3)("",!0)])),_:1})}var R={name:"ToastNotification",props:{show:Boolean,message:String,multiplier:{type:Number,default:1}}};const V=(0,j.A)(R,[["render",q],["__scopeId","data-v-47756e6d"]]);var Q=V;const K={class:"container mx-auto px-4 py-8"},D={class:"bg-white rounded-lg shadow-lg p-6"},Z={class:"flex justify-between items-center mb-6"},Y={key:0,class:"text-center py-8"},G={key:1},H={class:"space-y-4"},ee={class:"flex items-center space-x-4"},te={class:"font-medium text-gray-800"},se={class:"text-gray-600"},re=["onClick"],oe={class:"mt-6 pt-6 border-t"},ae={class:"flex justify-between text-lg font-medium"},ne={class:"mb-4"},ie={key:0,class:"mt-1 text-sm text-red-500"},ce={key:1,class:"mt-1 text-sm text-gray-500"},le={class:"mb-6"},ue={key:0,class:"mt-1 text-sm text-red-500"},de={key:1,class:"mt-1 text-sm text-gray-500"},he=["disabled"],me={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},pe={class:"bg-white rounded-lg p-6 max-w-md w-full"},fe={class:"text-center"},ge={class:"text-gray-600 mb-6"};function be(e,t,s,a,n,c){return(0,o.uX)(),(0,o.CE)("div",K,[(0,o.Lk)("div",D,[(0,o.Lk)("div",Z,[t[8]||(t[8]=(0,o.Lk)("h2",{class:"text-2xl font-bold text-gray-800"},"Shopping Cart",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("toggle-cart")),class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},t[7]||(t[7]=[(0,o.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,o.eW)(" Back to Lessons ")]))]),0===s.cartItems.length?((0,o.uX)(),(0,o.CE)("div",Y,t[9]||(t[9]=[(0,o.Lk)("i",{class:"fas fa-shopping-cart text-gray-400 text-5xl mb-4"},null,-1),(0,o.Lk)("p",{class:"text-gray-500"},"Your cart is empty",-1)]))):((0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("div",H,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.cartItems,(s=>((0,o.uX)(),(0,o.CE)("div",{key:s.id+s.addedAt,class:"flex items-center justify-between bg-gray-50 p-4 rounded-lg"},[(0,o.Lk)("div",ee,[(0,o.Lk)("i",{class:(0,i.C4)(["fas",s.icon,"text-2xl text-blue-600"])},null,2),(0,o.Lk)("div",null,[(0,o.Lk)("h3",te,(0,i.v_)(s.subject),1),(0,o.Lk)("p",se,"£"+(0,i.v_)(s.price),1)])]),(0,o.Lk)("button",{onClick:t=>e.$emit("remove-from-cart",s),class:"px-3 py-1 text-red-600 hover:bg-red-50 rounded-md transition-colors flex items-center gap-2"},t[10]||(t[10]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1),(0,o.eW)(" Remove ")]),8,re)])))),128)),(0,o.Lk)("div",oe,[(0,o.Lk)("div",ae,[t[11]||(t[11]=(0,o.Lk)("span",null,"Total:",-1)),(0,o.Lk)("span",null,"£"+(0,i.v_)(c.totalPrice),1)])])]),(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,r.D$)(((...e)=>c.handleCheckout&&c.handleCheckout(...e)),["prevent"])),class:"mt-8 pt-8 border-t"},[t[15]||(t[15]=(0,o.Lk)("h3",{class:"text-xl font-semibold mb-4"},"Checkout Information",-1)),(0,o.Lk)("div",ne,[t[12]||(t[12]=(0,o.Lk)("label",{class:"block text-gray-700 mb-2",for:"name"},[(0,o.eW)(" Name "),(0,o.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,o.bo)((0,o.Lk)("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>n.checkoutForm.name=e),type:"text",class:(0,i.C4)(["w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":n.nameError,"border-green-500":n.checkoutForm.name&&!n.nameError}]),onInput:t[2]||(t[2]=(...e)=>c.validateName&&c.validateName(...e)),placeholder:"e.g., John Smith or Mary Jane-Smith"},null,34),[[r.Jo,n.checkoutForm.name]]),n.nameError?((0,o.uX)(),(0,o.CE)("p",ie,(0,i.v_)(n.nameError),1)):((0,o.uX)(),(0,o.CE)("p",ce," Allowed: letters, spaces, hyphens, and apostrophes "))]),(0,o.Lk)("div",le,[t[13]||(t[13]=(0,o.Lk)("label",{class:"block text-gray-700 mb-2",for:"phone"},[(0,o.eW)(" Phone "),(0,o.Lk)("span",{class:"text-red-500"},"*")],-1)),(0,o.bo)((0,o.Lk)("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=e=>n.checkoutForm.phone=e),type:"tel",class:(0,i.C4)(["w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":n.phoneError,"border-green-500":n.checkoutForm.phone&&!n.phoneError}]),onInput:t[4]||(t[4]=(...e)=>c.validatePhone&&c.validatePhone(...e)),placeholder:"e.g., (123) 456-7890"},null,34),[[r.Jo,n.checkoutForm.phone]]),n.phoneError?((0,o.uX)(),(0,o.CE)("p",ue,(0,i.v_)(n.phoneError),1)):((0,o.uX)(),(0,o.CE)("p",de," Format: +X (XXX) XXX-XXXX or XXXXXXXXXX "))]),(0,o.Lk)("button",{type:"submit",disabled:!c.isFormValid,class:(0,i.C4)(["w-full py-3 px-4 rounded-md text-white font-medium transition-colors",[c.isFormValid?"bg-green-600 hover:bg-green-700":"bg-gray-300 cursor-not-allowed"]])},t[14]||(t[14]=[(0,o.Lk)("i",{class:"fas fa-credit-card mr-2"},null,-1),(0,o.eW)(" Checkout ")]),10,he)],32)]))]),n.showConfirmation?((0,o.uX)(),(0,o.CE)("div",me,[(0,o.Lk)("div",pe,[(0,o.Lk)("div",fe,[t[16]||(t[16]=(0,o.Lk)("i",{class:"fas fa-check-circle text-green-500 text-5xl mb-4"},null,-1)),t[17]||(t[17]=(0,o.Lk)("h3",{class:"text-xl font-bold mb-2"},"Order Confirmed!",-1)),(0,o.Lk)("p",ge," Thank you "+(0,i.v_)(n.checkoutForm.name)+"! Your order has been successfully submitted. ",1),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>c.finishCheckout&&c.finishCheckout(...e)),class:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors"}," Close ")])])])):(0,o.Q3)("",!0)])}var ke={name:"ShoppingCart",props:{cartItems:{type:Array,required:!0}},data(){return{checkoutForm:{name:"",phone:""},nameError:"",phoneError:"",showConfirmation:!1}},computed:{totalPrice(){return this.cartItems.reduce(((e,t)=>e+t.price),0).toFixed(2)},isFormValid(){return this.checkoutForm.name&&this.checkoutForm.phone&&!this.nameError&&!this.phoneError}},methods:{validateName(){const e=/^[A-Za-z][A-Za-z''-]+([ ][A-Za-z][A-Za-z''-]+)*$/;this.checkoutForm.name?this.checkoutForm.name.length<2?this.nameError="Name must be at least 2 characters long":this.checkoutForm.name.length>50?this.nameError="Name must not exceed 50 characters":e.test(this.checkoutForm.name.trim())?this.nameError="":this.nameError="Please enter a valid name (e.g., John Smith, Mary Jane-Smith, O'Connor)":this.nameError="Name is required"},validatePhone(){const e=/^(?:\+?\d{1,3}[-. ]?)?\(?(?:\d{3})\)?[-. ]?\d{3}[-. ]?\d{4}$/;if(this.checkoutForm.phone){const t=this.checkoutForm.phone.replace(/[^0-9]/g,"");t.length<10?this.phoneError="Phone number must have at least 10 digits":t.length>15?this.phoneError="Phone number cannot exceed 15 digits":e.test(this.checkoutForm.phone)?this.phoneError="":this.phoneError="Please enter a valid phone number (e.g., +1 (123) 456-7890 or 1234567890)"}else this.phoneError="Phone number is required"},async handleCheckout(){this.isFormValid&&(this.$emit("checkout-complete",{name:this.checkoutForm.name,phone:this.checkoutForm.phone}),this.showConfirmation=!0)},finishCheckout(){this.showConfirmation=!1,this.$emit("checkout-complete"),this.checkoutForm={name:"",phone:""}}}};const ye=(0,j.A)(ke,[["render",be]]);var ve=ye;const xe={class:"w-full mb-6"},Le={class:"bg-white rounded-lg shadow p-4"},we={class:"relative"},Ce={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},Ee={key:0,class:"mt-2 text-sm text-gray-600 flex items-center justify-between"};function Se(e,t,s,a,n,c){return(0,o.uX)(),(0,o.CE)("div",xe,[(0,o.Lk)("div",Le,[(0,o.Lk)("div",we,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>a.handleSearch&&a.handleSearch(...e)),placeholder:"Search by subject, location, price...",class:"w-full px-4 py-2 pl-10 pr-4 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[r.Jo,a.searchTerm]]),t[5]||(t[5]=(0,o.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,o.Lk)("i",{class:"fas fa-search text-gray-400"})],-1)),a.isLoading?((0,o.uX)(),(0,o.CE)("div",Ce,t[3]||(t[3]=[(0,o.Lk)("div",{class:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full border-t-transparent"},null,-1)]))):(0,o.Q3)("",!0),a.searchTerm&&!a.isLoading?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[2]||(t[2]=(...e)=>a.clearSearch&&a.clearSearch(...e)),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600"},t[4]||(t[4]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1)]))):(0,o.Q3)("",!0)]),a.searchTerm?((0,o.uX)(),(0,o.CE)("div",Ee,[(0,o.Lk)("span",null," Found "+(0,i.v_)(a.resultsCount)+" result"+(0,i.v_)(1!==a.resultsCount?"s":"")+' for "'+(0,i.v_)(a.searchTerm)+'" ',1)])):(0,o.Q3)("",!0)])])}var Xe=s(144),Fe=s(896),Te=s.n(Fe),je={name:"SearchBar",props:{initialCount:{type:Number,default:0}},emits:["search"],setup(e,{emit:t}){const s=(0,Xe.KR)(""),r=(0,Xe.KR)(!1),a=(0,Xe.KR)(e.initialCount),n=Te()((async e=>{r.value=!0;try{t("search",e)}finally{r.value=!1}}),300),i=()=>{n(s.value)},c=()=>{s.value="",n("")};return(0,o.wB)((()=>e.initialCount),(e=>{a.value=e})),{searchTerm:s,isLoading:r,resultsCount:a,handleSearch:i,clearSearch:c}}};const Ie=(0,j.A)(je,[["render",Se],["__scopeId","data-v-7ca02a1b"]]);var _e=Ie;const Ae="http://3.253.62.183:5001/api";console.log("API URL:",Ae);const Oe=async()=>{try{console.log("Fetching from:",`${Ae}/lessons`);const e=await fetch(`${Ae}/lessons`);if(!e.ok)throw new Error("Failed to fetch lessons");const t=await e.json();return t.map((e=>({id:e._id,subject:e.topic,location:e.location,price:e.price,spaces:e.space,icon:$e(e.topic)})))}catch(e){throw console.error("Error fetching lessons:",e),e}},Be=async e=>{try{const t=await fetch(`${Ae}/lessons/search?q=${encodeURIComponent(e)}`);if(!t.ok)throw new Error("Failed to search lessons");const s=await t.json();return s.map((e=>({id:e._id,subject:e.topic,location:e.location,price:e.price,spaces:e.space,icon:$e(e.topic)})))}catch(t){throw console.error("Error searching lessons:",t),t}},Pe=async e=>{try{const t=await fetch(`${Ae}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to create order")}return await t.json()}catch(t){throw console.error("Error creating order:",t),t}},Ne=async(e,t)=>{try{const s=await fetch(`${Ae}/lessons/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({space:t})});if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to update lesson space")}return await s.json()}catch(s){throw console.error("Error updating lesson space:",s),s}},$e=e=>{const t={Mathematics:"fa-square-root-variable",Physics:"fa-atom",Chemistry:"fa-flask",Biology:"fa-dna","Computer Science":"fa-laptop-code","English Literature":"fa-book",History:"fa-landmark",Geography:"fa-earth-americas",Art:"fa-palette",Music:"fa-music"};return t[e]||"fa-book"},Me={getLessons:Oe,createOrder:Pe,updateLessonSpace:Ne,searchLessons:Be};var We={name:"LessonList",components:{LessonCard:_,SortIndicator:N,ToastNotification:Q,ShoppingCart:ve,SearchBar:_e},data(){return{lessons:[],loading:!1,error:null,sortBy:"subject",ascending:!0,cartItems:[],showToast:!1,toastMessage:"",toastMultiplier:1,showCart:!1,isSearching:!1,searchTimeout:null}},computed:{sortedLessons(){return[...this.lessons].sort(((e,t)=>{let s=e[this.sortBy],r=t[this.sortBy];return"string"===typeof s&&(s=s.toLowerCase(),r=r.toLowerCase()),"price"!==this.sortBy&&"spaces"!==this.sortBy||(s=Number(s),r=Number(r)),s<r?this.ascending?-1:1:s>r?this.ascending?1:-1:0}))},sortOrderIcon(){return"price"===this.sortBy||"spaces"===this.sortBy?this.ascending?"fa-arrow-up-1-9":"fa-arrow-down-9-1":this.ascending?"fa-arrow-up-a-z":"fa-arrow-down-z-a"},sortOrderText(){return this.ascending?"Ascending":"Descending"}},async created(){await this.fetchLessons()},methods:{async fetchLessons(){try{this.loading=!0,this.lessons=await Me.getLessons(),this.lessons=this.lessons.map((e=>({...e,clickCount:0,lastClickTime:0,originalSpaces:e.spaces})))}catch(e){this.error="Failed to load lessons. Please try again later.",console.error("Error:",e)}finally{this.loading=!1}},async handleSearch(e){try{this.loading=!0,e?(this.lessons=await Me.searchLessons(e),this.lessons=this.lessons.map((e=>({...e,clickCount:0,lastClickTime:0,originalSpaces:e.spaces})))):await this.fetchLessons()}catch(t){console.error("Search error:",t),this.error="Failed to search lessons"}finally{this.loading=!1}},toggleSortOrder(){this.ascending=!this.ascending},addToCart(e){const t=Date.now(),s=1e3;e.spaces>0&&(t-e.lastClickTime<s?e.clickCount++:e.clickCount=1,e.lastClickTime=t,e.spaces--,this.cartItems.push({id:e.id,subject:e.subject,price:e.price,icon:e.icon,addedAt:new Date}),this.showToastMessage(`${e.subject} (£${e.price})`,e.clickCount))},removeFromCart(e){const t=this.lessons.find((t=>t.id===e.id));t&&t.spaces++;const s=this.cartItems.findIndex((t=>t.id===e.id&&t.addedAt===e.addedAt));-1!==s&&this.cartItems.splice(s,1),this.showToastMessage(`${e.subject} removed from cart`)},async handleCheckoutComplete(e){try{const t=this.cartItems.map((e=>e.id));await Me.createOrder({...e,lessonIds:t,numberOfSpace:1});for(const e of this.cartItems){const t=this.lessons.find((t=>t.id===e.id));t&&await Me.updateLessonSpace(t.id,t.spaces)}this.cartItems=[],this.showCart=!1,this.showToastMessage("Thank you for your order!"),await this.fetchLessons()}catch(t){this.lessons.forEach((e=>{e.spaces=e.originalSpaces})),this.cartItems=[],this.showToastMessage("Failed to complete checkout. Please try again.")}},showToastMessage(e,t=1){this.toastMessage=e,this.toastMultiplier=t,this.showToast=!0,setTimeout((()=>{this.showToast=!1,this.toastMultiplier=1}),3e3)}},beforeUnmount(){this.cartItems.length>0&&this.lessons.forEach((e=>{e.spaces=e.originalSpaces}))}};const ze=(0,j.A)(We,[["render",y],["__scopeId","data-v-08dcaff8"]]);var Je=ze,Ue={name:"App",components:{LessonList:Je}};const qe=(0,j.A)(Ue,[["render",n]]);var Re=qe;(0,r.Ef)(Re).mount("#app")}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,a){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[c])}))?r.splice(c--,1):(i=!1,a<n&&(n=a));if(i){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,n=r[0],i=r[1],c=r[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(c)var u=c(s)}for(t&&t(r);l<n.length;l++)a=n[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(4890)}));r=s.O(r)})();
//# sourceMappingURL=app.69d0347b.js.map